# 功能验证清单

## 后端 API 功能检验

### 1. 文件上传功能 ✓
- [ ] 访问 `POST /api/upload` 测试文件上传
- [ ] 验证文件是否保存到 `documents/` 目录
- [ ] 测试响应返回文件大小和路径信息

### 2. 知识库构建功能 ✓
- [ ] 调用 `POST /api/build-start` 启动构建
- [ ] 轮询 `GET /api/build-progress` 获取进度
- [ ] 验证进度字段更新正确
- [ ] 构建完成后检查 `vector_db/` 目录
- [ ] 调用 `GET /api/status` 验证向量库已加载

### 3. 流式查询功能 ✓
- [ ] 调用 `POST /api/query-stream` 测试流式响应
- [ ] 验证收到 SSE 格式的数据流
- [ ] 检查 `sources` 数据返回正确
- [ ] 检查 `content` 逐字符流式返回
- [ ] 检查 `done` 信号完整

### 4. 非流式查询功能 ✓
- [ ] 调用 `POST /api/query` 测试一次性响应
- [ ] 验证返回完整的 answer 和 sources

---

## 前端 UI 功能检验

### 1. 页面布局 ✓
- [ ] 顶部导航栏正确显示
- [ ] Logo 和标题显示
- [ ] 状态指示器显示
- [ ] 设置按钮可见

### 2. 左侧边栏 ✓
- [ ] 文件上传区域可见
- [ ] 拖拽上传功能正常
- [ ] 点击上传区域打开文件选择器
- [ ] 已上传文件列表显示
- [ ] 构建按钮可点击

### 3. 知识库构建进度 ✓
- [ ] 点击"开始构建"后显示进度条
- [ ] 进度条正确更新百分比
- [ ] 显示处理的文档块数量
- [ ] 构建完成显示成功消息
- [ ] 状态栏更新为"✓ 已加载"

### 4. 主聊天区域 ✓
- [ ] 空闲时显示欢迎界面
- [ ] 消息以气泡形式显示
- [ ] 用户消息右对齐，绿色样式
- [ ] 助手消息左对齐，灰色样式
- [ ] 消息带有头像和角色标识

### 5. 流式响应显示 ✓
- [ ] 输入问题后助手消息逐字显示
- [ ] 光标闪烁效果可见
- [ ] 完整的回答显示
- [ ] 参考来源正确展示
- [ ] 多个来源可折叠展开

### 6. 参考来源功能 ✓
- [ ] 回答下方显示"参考来源"折叠框
- [ ] 点击展开显示来源列表
- [ ] 显示来源文件名
- [ ] 显示来源预览文本

### 7. 输入区域功能 ✓
- [ ] 输入框可输入文本
- [ ] Shift+Enter 发送消息
- [ ] 点击发送按钮发送消息
- [ ] 发送后输入框自动清空
- [ ] 显示发送按钮加载状态

### 8. 图片功能 ✓
- [ ] 点击图片按钮打开文件选择
- [ ] 可粘贴图片到输入框
- [ ] 图片预览显示在输入框上方
- [ ] 点击 X 按钮移除图片
- [ ] 图片和文字可一起发送

### 9. 设置抽屉 ✓
- [ ] 点击设置按钮打开抽屉
- [ ] 显示模型提供者选择框
- [ ] 选择 Ollama 时显示额外配置
- [ ] 配置自动保存到本地存储
- [ ] 刷新页面后配置保留

### 10. 样式和主题 ✓
- [ ] 整体样式类似 ChatGPT 官网
- [ ] 配色合理，绿色主色调
- [ ] 响应式布局适配不同屏幕
- [ ] 按钮和输入框样式一致
- [ ] 动画流畅无卡顿

---

## 集成测试场景

### 场景 1: 完整工作流
1. [ ] 上传一个 Markdown 文档
2. [ ] 点击开始构建
3. [ ] 等待构建完成
4. [ ] 输入相关问题
5. [ ] 查看流式响应
6. [ ] 检查参考来源

### 场景 2: 模型切换
1. [ ] 打开设置抽屉
2. [ ] 切换到 Ollama
3. [ ] 输入模型配置
4. [ ] 提问验证使用新模型
5. [ ] 切换回默认模型

### 场景 3: 图片上传
1. [ ] 粘贴截图到输入框
2. [ ] 图片预览显示
3. [ ] 发送消息（记录是否支持）
4. [ ] 移除图片
5. [ ] 验证输入框清空

### 场景 4: 错误处理
1. [ ] 在知识库未加载时提问
2. [ ] 查看错误提示
3. [ ] 尝试上传不支持的文件
4. [ ] 验证错误消息显示
5. [ ] 网络中断时的行为

---

## 性能检查

- [ ] 初始加载速度
- [ ] 流式响应延迟
- [ ] 文件上传速度
- [ ] 知识库构建时间
- [ ] 页面滚动流畅度
- [ ] 内存使用合理

---

## 浏览器兼容性

- [ ] Chrome/Edge (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] 移动浏览器

---

## 后端日志检查

启动后端时查看控制台输出：

```
✓ 后端服务启动信息
✓ API 路由注册
✓ CORS 配置
✓ 文件上传日志
✓ 知识库构建日志
✓ 查询请求日志
✓ 错误和异常日志
```

---

## 前端开发工具

使用浏览器开发者工具检查：

```
✓ 网络标签：API 请求和响应
✓ 控制台：JavaScript 错误和警告
✓ 应用：本地存储数据
✓ 性能：页面加载时间
```

---

## 部署前清单

- [ ] 检查所有环境变量配置
- [ ] 验证 API 密钥有效
- [ ] 测试大文件上传
- [ ] 压力测试并发请求
- [ ] 检查日志输出级别
- [ ] 验证错误处理完整
- [ ] 测试生产环境 CORS 设置
- [ ] 验证文件权限正确

---

**完成日期**: ________________
**测试人员**: ________________
**备注**: 

