# ğŸ“‹ æ—¥å¿—ç³»ç»Ÿè¯´æ˜

## æ—¥å¿—ä½ç½®

ç³»ç»Ÿç”Ÿæˆçš„æ—¥å¿—ä¿å­˜åœ¨ä»¥ä¸‹ä½ç½®ï¼š

```
RAGçŸ¥è¯†åº“/
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ backend.log      â† åç«¯ API æ—¥å¿—
â”‚   â””â”€â”€ frontend.log     â† å‰ç«¯æ—¥å¿—
```

## æ—¥å¿—å†…å®¹

### åç«¯æ—¥å¿— (logs/backend.log)

åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **APIè¯·æ±‚æ—¥å¿—**
   - è¯·æ±‚å¼€å§‹æ—¶é—´å’Œå‚æ•°
   - æ–‡æ¡£æ£€ç´¢ä¿¡æ¯ï¼ˆæ£€ç´¢åˆ°çš„æ–‡æ¡£æ•°é‡ï¼‰
   - AIè°ƒç”¨ä¿¡æ¯ï¼ˆè°ƒç”¨å¼€å§‹/ç»“æŸï¼Œè€—æ—¶ï¼‰
   - è¿”å›ç»“æœä¿¡æ¯

2. **Agentæ‰§è¡Œæ—¥å¿—**
   - Agentå¯åŠ¨å’Œé…ç½®
   - æ¯æ¬¡è¿­ä»£çš„æ€è€ƒè¿‡ç¨‹
   - å·¥å…·è°ƒç”¨ä¿¡æ¯ï¼ˆå·¥å…·åç§°ã€å‚æ•°ã€è€—æ—¶ï¼‰
   - LLMè°ƒç”¨è€—æ—¶
   - æœ€ç»ˆç»“æœç»Ÿè®¡

3. **æ€§èƒ½æŒ‡æ ‡**
   - å„ç¯èŠ‚è€—æ—¶ï¼ˆç§’ï¼‰
   - ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨
   - è¿­ä»£æ¬¡æ•°

**æ—¥å¿—æ ¼å¼:**
```
[timestamp] - [logger_name] - [level] - [message]
```

**ç¤ºä¾‹:**
```
2026-01-20 14:30:45,123 - src.api.routes - INFO - [Query Stream] å¼€å§‹å¤„ç†æŸ¥è¯¢ - é—®é¢˜: ä»Šå¤©å¹¿å·å¤©æ°”æ€æ ·...
2026-01-20 14:30:45,234 - src.api.routes - INFO - [Ollama] å¼€å§‹æ£€ç´¢æ–‡æ¡£...
2026-01-20 14:30:45,456 - src.api.routes - INFO - [Ollama] æ£€ç´¢åˆ° 5 ä¸ªæ–‡æ¡£
2026-01-20 14:30:47,890 - src.api.routes - INFO - [Ollama] å¼€å§‹è°ƒç”¨AIç”Ÿæˆç­”æ¡ˆ - æ¨¡å‹: deepseek-chat
2026-01-20 14:30:49,123 - src.api.routes - INFO - [Ollama] AIè°ƒç”¨å®Œæˆ - è€—æ—¶: 2.23ç§’
2026-01-20 14:30:49,234 - src.api.routes - INFO - [Ollama] å®Œæ•´æµç¨‹å®Œæˆ - æ€»è€—æ—¶: 3.45ç§’
```

## æŸ¥çœ‹æ—¥å¿—

### æ–¹å¼1: ä½¿ç”¨æ—¥å¿—æŸ¥çœ‹å·¥å…·ï¼ˆæ¨èï¼‰

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆæœ€å100è¡Œï¼‰
python view_logs.py

# æŸ¥çœ‹åç«¯æ—¥å¿—
python view_logs.py backend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
python view_logs.py frontend

# å®æ—¶è·Ÿè¸ªæ—¥å¿—ï¼ˆç±»ä¼¼ tail -fï¼‰
python view_logs.py follow
```

### æ–¹å¼2: ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·

```bash
# æŸ¥çœ‹æ•´ä¸ªæ—¥å¿—æ–‡ä»¶
cat logs/backend.log

# æŸ¥çœ‹æœ€å100è¡Œ
tail -100 logs/backend.log

# å®æ—¶è·Ÿè¸ªæ—¥å¿—ï¼ˆæŒç»­æ˜¾ç¤ºæ–°å†…å®¹ï¼‰
tail -f logs/backend.log

# æœç´¢ç‰¹å®šä¿¡æ¯
grep "DeepSeek" logs/backend.log
grep "ERROR" logs/backend.log

# ç»Ÿè®¡æ—¥å¿—æ¡æ•°
wc -l logs/backend.log
```

### æ–¹å¼3: åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹

åœ¨ VS Code ä¸­æ‰“å¼€ï¼š
```
RAGçŸ¥è¯†åº“/logs/backend.log
```

## æ—¥å¿—çº§åˆ«

ç³»ç»Ÿä½¿ç”¨çš„æ—¥å¿—çº§åˆ«ï¼š

- **INFO** (ğŸ”µ) - æ­£å¸¸ä¿¡æ¯ï¼ˆè¯·æ±‚ã€è°ƒç”¨ã€å®Œæˆï¼‰
- **WARNING** (ğŸŸ¡) - è­¦å‘Šä¿¡æ¯ï¼ˆå¯èƒ½çš„é—®é¢˜ï¼‰
- **ERROR** (ğŸ”´) - é”™è¯¯ä¿¡æ¯ï¼ˆæ“ä½œå¤±è´¥ï¼‰
- **DEBUG** (âšª) - è°ƒè¯•ä¿¡æ¯ï¼ˆè¯¦ç»†å†…éƒ¨çŠ¶æ€ï¼‰

## æ€§èƒ½åˆ†æç¤ºä¾‹

ä»æ—¥å¿—ä¸­å¯ä»¥åˆ†æå„ç¯èŠ‚çš„æ€§èƒ½ï¼š

```
[Query] å¼€å§‹å¤„ç†æŸ¥è¯¢
â”œâ”€â”€ [Ollama] å¼€å§‹æ£€ç´¢æ–‡æ¡£...
â”œâ”€â”€ [Ollama] æ£€ç´¢åˆ° 5 ä¸ªæ–‡æ¡£        âœ“ æ£€ç´¢è€—æ—¶: ~0.2ç§’
â”œâ”€â”€ [Ollama] å¼€å§‹è°ƒç”¨AI...
â”œâ”€â”€ [Ollama] AIè°ƒç”¨å®Œæˆ - è€—æ—¶: 2.3ç§’ âœ“ AIè€—æ—¶: ~2.3ç§’
â”œâ”€â”€ [Ollama] å¼€å§‹æµå¼è¿”å›...
â””â”€â”€ [Ollama] å®Œæ•´æµç¨‹å®Œæˆ - æ€»è€—æ—¶: 3.5ç§’
```

## æ¸…ç©ºæ—¥å¿—

```bash
# æ¸…ç©ºåç«¯æ—¥å¿—
echo "" > logs/backend.log

# æ¸…ç©ºæ‰€æœ‰æ—¥å¿—
echo "" > logs/backend.log
echo "" > logs/frontend.log
```

## å¸¸è§æ—¥å¿—æŸ¥è¯¢

### æŸ¥æ‰¾é”™è¯¯
```bash
grep "ERROR\|error\|failed\|Failed" logs/backend.log
```

### æŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½çš„æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰Agentæ‰§è¡Œ
grep "\[Agent\]" logs/backend.log

# æŸ¥çœ‹æ‰€æœ‰APIè¯·æ±‚
grep "\[Query\]\|\[Ollama\]\|\[DeepSeek\]" logs/backend.log

# æŸ¥çœ‹æ€§èƒ½æ•°æ®
grep "è€—æ—¶" logs/backend.log
```

### ç»Ÿè®¡æ‰§è¡Œè€—æ—¶
```bash
# æ˜¾ç¤ºæ‰€æœ‰åŒ…å«è€—æ—¶ä¿¡æ¯çš„è¡Œ
grep "è€—æ—¶\|Total" logs/backend.log
```

## æ—¥å¿—é…ç½®

æ—¥å¿—é…ç½®åœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­ï¼š

1. **src/utils/logger.py** - æ—¥å¿—å·¥å…·å‡½æ•°
2. **src/api/app.py** - APIåº”ç”¨çš„æ—¥å¿—åˆå§‹åŒ–
3. **run_api.py** - APIå¯åŠ¨è„šæœ¬çš„æ—¥å¿—é…ç½®

## æ•…éšœæ’æŸ¥

### çœ‹ä¸åˆ°æ—¥å¿—

1. **æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æ˜¯å¦å­˜åœ¨**
   ```bash
   ls -la logs/
   ```

2. **æ£€æŸ¥æ—¥å¿—ç›®å½•æƒé™**
   ```bash
   chmod 755 logs/
   ```

3. **æ‰‹åŠ¨æ£€æŸ¥æ—¥å¿—å†…å®¹**
   ```bash
   cat logs/backend.log | tail -50
   ```

4. **æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—**
   ```bash
   grep -i error logs/backend.log
   ```

### æ—¥å¿—æ–‡ä»¶è¿‡å¤§

å¦‚æœæ—¥å¿—æ–‡ä»¶å˜å¾—å¾ˆå¤§ï¼Œå¯ä»¥ï¼š

```bash
# æ¸…ç©ºæ—¥å¿—
> logs/backend.log

# æˆ–è€…åªä¿ç•™æœ€è¿‘çš„æ—¥å¿—
tail -1000 logs/backend.log > logs/backend.log.bak
```

## ç›¸å…³æ–‡ä»¶

- ğŸ“„ [logs/backend.log](../logs/backend.log) - åç«¯æ—¥å¿—æ–‡ä»¶
- ğŸ“„ [logs/frontend.log](../logs/frontend.log) - å‰ç«¯æ—¥å¿—æ–‡ä»¶
- ğŸ [view_logs.py](../view_logs.py) - æ—¥å¿—æŸ¥çœ‹å·¥å…·
- ğŸ [src/utils/logger.py](../src/utils/logger.py) - æ—¥å¿—é…ç½®

---

âœ¨ **æç¤º**: åœ¨è°ƒè¯•é—®é¢˜æ—¶ï¼Œå§‹ç»ˆå…ˆæŸ¥çœ‹ `logs/backend.log` æ–‡ä»¶ï¼Œæ—¥å¿—ä¼šè®°å½•è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹ã€‚
